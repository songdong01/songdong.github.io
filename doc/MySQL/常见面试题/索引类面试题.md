
# 面试题25 为什么使用B+树作为索引？
MySQL默认使用B+树作为索引。

我们一般查找一个数据，核心思想是使用二分查找，符合这个思想的有二叉树（二叉查找树、二叉平衡树），多叉树（B树，B+树），跳表

**为什么不使用二叉查找树**

**二叉查找树的特点：**


（1）左节点比根节点大、右节点比根节点大。


（2）每个节点保存了左孩子、右孩子，和对应的值。  








但是它有一个致命的缺点，就是碰见有序数字的时候，会退化为链表。所以二叉查找树不能作为MySQL的查找，
<img width="678" alt="image" src="https://github.com/songdong01/songdong.github.io/assets/55269887/5e4bac0c-f0d9-4acf-9e4d-fc6bb142f812">

我们将二叉树查找树做了一个优化，保证左孩子和右边孩子的节点的层级不超过1，这样子可以保证查询的效率保持一致。
<img width="654" alt="image" src="https://github.com/songdong01/songdong.github.io/assets/55269887/9e37c127-08c5-4cde-84d5-fd1a706821d9">

**二叉平衡树的特点：**



（1）左孩子的层级和右孩子的层级差值不超过1，保证二叉平衡树不会退化为链表。


但是二叉树整体就有一些问题，例如每个节点只能存储两个节点、一个关键字，会导致树的高度增高。


**多叉树**
B树是一个多叉树，每个节点是有多个k个键和k+1个指针构成。

<img width="1044" alt="image" src="https://github.com/songdong01/songdong.github.io/assets/55269887/97596156-df1b-4d7c-8cd6-76e874b24eec">



**B树的特点：**


1.每个节点存储了k个键和k+1个指针，每个建就是索引值和数据。


2.节点中的索引值是按照从左到右开始进行排序的。


<img width="1054" alt="image" src="https://github.com/songdong01/songdong.github.io/assets/55269887/d29a4718-3f3c-490d-a6df-73690c51a96d">

**B树的缺点：**  

1.MySQL中的部分数据是存储在BufferPool中的，如果在BufferPool中不存在的话，则去磁盘中通过一个IO查找到数据，加载到BufferPool中。
如果要求B树每个节点存储的数据，则会导致BufferPool中的数据存储量减少，导致IO次数增多。


2.如果要进行范围查询，B树需要进行全索引的遍历，查找效率低下。



**B+树对B的优化：**


1.非叶子节点只存储索引值和指针，不存储数据，这样每个节点可以读取到更多的数据。


2.叶子节点通过双向链表链接，可以支持范围查询。

# 面试题26 B+树和跳表的区别
待补充

# 面试题27 B+树可以存储多少数据
这个肯定说的是聚簇索引，一般来说，大概是2000w左右的数据，单表存储也推荐2000w左右的数据。
一个节点是16KB的大小

假设一个B+树的高度是2，



